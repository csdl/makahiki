# Generated by the windmill services transformer
from windmill.authoring import WindmillTestClient

def test_add_event():
    client = WindmillTestClient(__name__)

    client.open(url=u'http://localhost:8000/account/login/')
    client.waits.forPageLoad(timeout=u'20000')
    client.type(text=u'admin', id=u'id_username')
    client.type(text=u'changeme', id=u'id_password')
    client.click(value=u'Log in \xbb')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(link=u'Admin', timeout=u'8000')
    client.click(link=u'Admin')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(xpath=u"//div[@id='content-main']/div[2]/table/tbody/tr[1]/td[1]/a", timeout=u'8000')
    client.click(xpath=u"//div[@id='content-main']/div[2]/table/tbody/tr[1]/td[1]/a")
    client.waits.forPageLoad(timeout=u'20000')
    client.type(text=u'Test Event', id=u'id_title')
    client.type(text=u'A test event', id=u'id_description')
    client.type(text=u'10', id=u'id_point_value')
    client.click(xpath=u"//form[@id='activity_form']/div/fieldset/div[6]/div/span/a[1]")
    client.click(id=u'id_confirm_type')
    client.select(option=u'', id=u'id_confirm_type')
    client.click(value=u'text')
    client.check(id=u'id_is_event')
    client.click(name=u'_save')
    client.waits.forPageLoad(timeout=u'20000')
    client.asserts.assertText(xpath=u"//form[@id='activity_form']/div/fieldset/div[9]/ul/li", validator=u'Events require an event date.')
    client.click(xpath=u"//form[@id='activity_form']/div/fieldset/div[9]/div/p/span[1]/a[1]")
    client.click(link=u'Now')
    client.click(name=u'_save')
    client.waits.forPageLoad(timeout=u'20000')
    client.asserts.assertText(xpath=u"//div[@id='container']/ul/li", validator=u'The activity "Test Event" was added successfully.')
    client.click(link=u'Activities')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(link=u'Activitys', timeout=u'8000')
    client.click(link=u'Activitys')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(link=u'Test Event', timeout=u'8000')
    client.click(link=u'Test Event')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(link=u'Delete', timeout=u'8000')
    client.click(link=u'Delete')
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(timeout=u'8000', value=u"Yes, I'm sure")
    client.click(value=u"Yes, I'm sure")
    client.waits.forPageLoad(timeout=u'20000')
    client.waits.forElement(link=u'Log out', timeout=u'8000')
    client.click(link=u'Log out')
    client.waits.forPageLoad(timeout=u'20000')
    client.asserts.assertText(xpath=u"//div[@id='content']/h1", validator=u'Logged out')