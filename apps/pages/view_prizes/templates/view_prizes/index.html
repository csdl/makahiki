{% extends "logged_in_base.html" %}

{% load class_tags %}

{% block page_title %}
  Prizes
{% endblock %}

{% block extra_head %}
  {% import_page_css "view_prizes" STATIC_URL CSS_THEME %}
{% endblock %}

{% block body %}
<div {% get_id_and_classes "prizes-list" %}>
  <div {% get_id_and_classes "prizes-list-box" %}>
    <div {% get_id_and_classes "prizes-list-title" %}>
      Prizes and Prize Winners
    </div>
    <div {% get_id_and_classes "prizes-list-content" %}>
      {% include "view_prizes/prize_list.html" %}
    </div>
    <script type="text/javascript">
      $(document).ready(function() {
        var height = 400;
        $("#prizes-list-content").children().each(function(index, value) {
          if ($(value).height() > height) {
            height = $(value).height();
          }
        });

        $("#prizes-list-content").cycle({height: "" + height + "px"});
      });
      
      // // Wrap this code in an anonymous self-invoking function to avoid polluting global namespace.
      // (function() {
      //   var configuration = new org.wattdepot.gdata.kukuicup.Configuration();
      // 
      //   // Get the spreadsheets we need.
      //   var rollingHoursEnergyUrl = configuration.getRollingHoursEnergyUrl();
      //   // console.log(rollingHoursEnergyUrl);
      //   var refreshInterval = 0; // don't refresh this spreadsheet.
      // 
      //   // Load the visualization API and the spreadsheet, then call displayRank.
      //   var loader = new org.wattdepot.gdata.GDataLoader(displayRank, rollingHoursEnergyUrl, refreshInterval);  
      // 
      //   function displayRank(rollingHoursDatatable) {
      //     var energyRank = new org.wattdepot.gdata.makahiki.EnergyRank(configuration);
      //     var leaderInfo = energyRank.calculateLeader(rollingHoursDatatable);
      //     energyRank.insertLeader('round-1-leader', leaderInfo);
      //     //energyRank.insertLeader('round-2-leader', leaderInfo);
      //     energyRank.insertLeader('overall-leader', leaderInfo);
      //   }
      // })();
    </script>
  </div>
</div>

<div {% get_id_and_classes "prizes-raffle" %}>
  <div {% get_id_and_classes "prizes-raffle-box" %}>
    <div {% get_id_and_classes "prizes-raffle-title" %}>
      Round 1 Raffle Game
    </div>
    <div {% get_id_and_classes "prizes-raffle-content" %}>
      <div {% get_id_and_classes "prizes-raffle-info" %}>
        Your total raffle tickets: 2 Allocated right now: 1 Available: 1
      </div>
      <table {% get_id_and_classes "prizes-raffle-table" %}>
        <tr>
          <th {% get_id_and_classes "prizes-raffle-prize-header" %}>Prize</th>
          <th {% get_id_and_classes "prizes-raffle-user-tickets-header" %}>Your tickets</th>
          <th {% get_id_and_classes "prizes-raffle-total-tickets-header" %}>Total tickets</th>
          <th {% get_id_and_classes "prizes-raffle-odds-header" %}>Current odds</th>
          <th {% get_id_and_classes "prizes-raffle-options-header" %}>Change ticket allocation</th>
        </tr>
        <tr>
          <td class="{% insert_classes "prize-item" %}">
            <img src="{{STATIC_URL}}images/prizes/bikehelmet.jpg"/>
            <a href="#">
              Bike helmet 
            </a>
          </td>
          <td class="{% insert_classes "prize-number" %}">1</td>
          <td class="{% insert_classes "prize-number" %}">5</td>
          <td class="{% insert_classes "prize-number" %}">0%</td>
          <td>
            <a class="{% insert_classes "prizes-add-button" %}" href="#">+1</a>
            <a class="{% insert_classes "prizes-remove-button" %}" href="#">-1</a>
          </td>
        </tr>
        <tr class="alt-row">
          <td class="{% insert_classes "prize-item" %}">
            <img src="{{STATIC_URL}}images/prizes/surf_lessons.jpg"/>
            <a href="#">
              Surf lessons
            </a>
          </td>
          <td class="{% insert_classes "prize-number" %}">0</td>
          <td class="{% insert_classes "prize-number" %}">13</td>
          <td class="{% insert_classes "prize-number" %}">0%</td>
          <td>
            <a class="{% insert_classes "prizes-add-button" %}" href="#">+1</a>
            <a class="{% insert_classes "prizes-remove-button" %}" href="#">-1</a>
          </td>
        </tr>
        <tr>
          <td class="{% insert_classes "prize-item" %}">
            <img src="{{STATIC_URL}}images/prizes/carbon-credits.jpg"/>
            <a href="#">
              Carbon credits
            </a>
          </td>
          <td class="{% insert_classes "prize-number" %}">0</td>
          <td class="{% insert_classes "prize-number" %}">10</td>
          <td class="{% insert_classes "prize-number" %}">N/A</td>
          <td>
            <a class="{% insert_classes "prizes-add-button" %}" href="#">+1</a>
            <a class="{% insert_classes "prizes-remove-button" %}" href="#">-1</a>
          </td>
        </tr>
      </table>
      <div id="prizes-raffle-footer">
        You receive 1 raffle ticket for every 25 awarded Kukui Cup points.<br/>
        <span id="prizes-raffle-footer-deadline">Deadline for Round 1 submissions: Sunday, October 9, 2011, 8pm</span>
        Round 1 winners to be notified via email on Monday, October 10, 2011 at 10am
      </div>
    </div>
  </div>
</div>
{% endblock %}