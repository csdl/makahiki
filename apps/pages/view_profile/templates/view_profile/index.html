{% extends "logged_in_base.html" %}

{% block page_title %}
  Manage Your Profile
{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{{ STATIC_URL}}css/{{CSS_THEME}}/pages/view_profile.css">
{% endblock %}

{% block body %}
<div class="span-8">
  <div class="widget ui-corner-all ui-accordion ui-widget ui-accordion-icons">
    <div class="widget-title ui-state-active ui-accordion-header ui-corner-top">
      My Info
    </div>
    <div class="widget-body ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
      {% include "view_profile/components/form.html" %}
    </div>
  </div>
</div>

<div class="span-8">
  <div class="widget ui-corner-all ui-accordion ui-widget ui-accordion-icons">
    <div class="widget-title ui-state-active ui-accordion-header ui-corner-top">
      My Badges
    </div>
    <div class="widget-body ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
      <h5>Individual Badges</h5>
      <table>
        <tr>
          <th></th>
          <th style="width: 30%">Badge</th>
          <th style="width: 50%">Achievement</th>
        </tr>
        <tr>
          <td><img src="{{STATIC_URL}}images/profile/check_badge.png"/></td>
          <td style="vertical-align: middle">Daily Login</td>
          <td style="vertical-align: middle">For logging in 3 days in a row.</td>
        </tr>
      </table>
      
      <h5>Lounge Badges</h5>
      <table>
        <tr>
          <th></th>
          <th style="width: 30%">Badge</th>
          <th style="width: 50%">Achievement</th>
        </tr>
        <tr>
          <td colspan="3" style="text-align: center">No lounge badges achieved so far</td>
        </tr>
      </table>
      
      <div style="text-align: center">
        <a href="#">See Badge Catalog</a>
      </div>
    </div>
  </div>
</div>

<div class="span-8 last">
  <div class="widget ui-corner-all ui-accordion ui-widget ui-accordion-icons">
    <div class="widget-title ui-state-active ui-accordion-header ui-corner-top">
      My Achievements
    </div>
    <div class="widget-body ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
      <h5>Current and Pending</h5>
      <table>
        <tr>
          <th>Date</th>
          <th>Task</th>
          <th>Status</th>
        </tr>
        {% if in_progress_members %}
          {% for member in in_progress_members %}
            {% if member.activity %}
            <tr>
              <td>{{member.created_at|date:"n/j/y"}}</td>
              <td>Activity: {{member.activity}}</td>
              <td>{{member.approval_status.capitalize}}</td>
            </tr>
            {% else %}
            <tr>
              <td>{{member.created_at|date:"n/j/y"}}</td>
              <td>Commitment: {{member.commitment}}</td>
              <td>In Progress</td>
            </tr>
            {% endif %}
          {% endfor %}
        {% else %}
        <tr><td colspan="3">You have nothing in progress or pending.</td></tr>
        {% endif %}
      </table>
      
      <h5>Previously Awarded</h5>
      <table>
        <tr>
          <th>Date</th>
          <th>Task</th>
          <th>Points</th>
        </tr>
        {% if completed_members %}
          {% for member in completed_members %}
            <tr>
              <td>{{member.award_date|date:"n/j/y"}}</td>
              {% if member.commitment %}
              <td>Commitment: {{member.commitment}}</td>
              <td>{{member.commitment.point_value}}</td>
              {% else %}
              <td>Activity: {{member.activity}}</td>
              <td>{{member.activity.point_value}}</td>
              {% endif %}
            </tr>
          {% endfor %}
        {% else %}
          <tr><td colspan="3">You have not been awarded anything yet!</td></tr>
        {% endif %}
      </table>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_body %}
  {% if fb_enabled %}
  <div id="fb-root"></div>
  <script src="http://connect.facebook.net/en_US/all.js"></script>
  <script>
    FB.init({appId: '{{FACEBOOK_APP_ID}}', status: true, cookie: true, xfbml: true});
  </script>
  {% endif %}

{% endblock %}