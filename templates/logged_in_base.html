{% extends "base.html" %}

{% load class_tags %}
{% load generic_flatblocks %}

{% block extra_head_base %}
  {% import_logged_in_css STATIC_URL %}
  {% block extra_head %}{% endblock %}
{% endblock %}

{% block header %}

<div style="margin-top: 10px">
  <div {% get_id_and_classes "header-logo" %}>
    <img src="{{STATIC_URL}}images/logo.png"/>
  </div>
  <div {% get_id_and_classes "header-title" %}>
    <h3>{% block page_title %}{% endblock %}</h3>
  </div>
  <div {% get_id_and_classes "header-info" %}>
    {% include "components/user_info.html" %}
  </div>
  <div {% get_id_and_classes "header-nav" %}>
    {% include "components/navigation.html" %}
  </div>
</div>    

{% if help_info %}
  <div {% get_id_and_classes "notification" %}> 
    <div {% get_id_and_classes "notification-box" %}>
      Help Topics: 
      <ul {% get_id_and_classes "help-topics" %}>
      {% for number in help_info.count %}
        {% gblock help_info.prefix,number for "gblocks.TitleAndText" into "block_object" %}
        <li>
          <a id="help-title-{{number}}" href="#" onclick='$("#help-dialog-{{number}}").dialog("open"); return false;'>
          {% if block_object.title %}
            {{block_object.title}}
          {% else %}
            No title
          {% endif %}
          </a>
        </li>
      {% endfor %}
      </ul>
      <div {% get_id_and_classes "help-page" %}>
        {% gblock help_info.prefix for "gblocks.Text" with "help/page_help/help_box.html" %}
      </div>
    </div>
    <a href="#" onclick="$('#notification_box').fadeOut(); return false;">
      <span style="margin-top: 1px; float:right" class="ui-icon ui-icon-close"></span>
    </a>
  </div>
{% endif %}

{% endblock %}

{% block extra_body %}
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('a.frontendadmin_edit').hover(
        function(){jQuery(this).parent().css('outline', '4px solid #E9B007')},
        function(){jQuery(this).parent().css('outline', '')}
    );
    
    jQuery('a.frontendadmin_edit').click(function(){
            jQuery(this).parent().css('outline', '');
            jQuery(this).parent().load(this.href);
            return false;
    });
    
    jQuery('a.frontendadmin_delete').hover(
        function(){jQuery(this).parent().css('outline', '4px solid #E9B007')},
        function(){jQuery(this).parent().css('outline', '')}
    );
});
</script>

{% if help_info %}
  {% for number in help_info.count %}
  {% gblock help_info.prefix,number for "gblocks.TitleAndText" with "help/page_help/help_dialog.html" %}
  
  <script type="text/javascript"> 
    $(document).ready(function() {
      $("#help-dialog-{{number}}").dialog({
          modal: true,
          autoOpen: false
      });
    })
  </script>  
  {% endfor %}
{% endif %}

{% endblock %}