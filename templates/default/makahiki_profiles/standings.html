<script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.GDataLoader.js"></script>
<script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.kukuicup.Configuration.js"></script>
<script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.makahiki.Standings.js"></script>
<script type="text/javascript">
	$(function() {
		$("#tabs").tabs({ selected: {{standings.selected_tab}} });
	});
</script>

<div id="tabs" class="activity_item">
  <ul>
		{% for title in standings.standings_titles %}
		  {% if forloop.last %}
		    <li><a href="#overall_standings" style="font-weight: normal">{{title}}</a></li>
		  {% else %}
		    <li><a href="#floor_standings_{{forloop.counter}}" style="font-weight: normal">{{title}}</a></li>
		  {% endif %}
		{% endfor %}
	</ul>

  {% for standings in standings.floor_standings %}
    {% if forloop.last %}
      <div id="overall_standings"></div>
      <script type="text/javascript">
      // Wrap this code in an anonymous self-invoking function to avoid polluting global namespace.
      (function() {
        // This data structure must be generated by Makahiki.
        var floorStandings = {{standings|safe}};

        // Load the visualization API, then call displayDormData.
        var floorLoader = new org.wattdepot.gdata.GDataLoader(displayOverallStandings);  

        function displayOverallStandings() {
          var configuration = new org.wattdepot.gdata.kukuicup.Configuration();
          var standingsChart = new org.wattdepot.gdata.makahiki.Standings(configuration);
          standingsChart.draw('overall_standings', floorStandings);
        }
      })();
      </script>
    {% else %}
      <div id="floor_standings_{{forloop.counter}}"></div>
      <script type="text/javascript">
      // Wrap this code in an anonymous self-invoking function to avoid polluting global namespace.
      (function() {
        // This data structure must be generated by Makahiki.
        var floorStandings = {{standings|safe}};

        // Load the visualization API, then call displayDormData.
        var floorLoader = new org.wattdepot.gdata.GDataLoader(displayFloor{{forloop.counter}}Standings);  

        function displayFloor{{forloop.counter}}Standings() {
          var configuration = new org.wattdepot.gdata.kukuicup.Configuration();
          var standingsChart = new org.wattdepot.gdata.makahiki.Standings(configuration);
          standingsChart.draw('floor_standings_{{forloop.counter}}', floorStandings);
        }
      })();
      </script>
    {% endif %}
  {% endfor %}
</div>
