{% extends "site_base.html" %}

{% load i18n %}
{% load generic_flatblocks %}

{% block tab_id %}id="home_tab"{% endblock %}

{% block extra_head %}
  <script type='text/javascript' src='http://www.google.com/jsapi'></script>
  <script type="text/javascript">
    //Resolves conflict with Prototype Library.
    jQuery.noConflict()
    
    //News toggle
    jQuery(document).ready(function(){
    	//Switch the "Open" and "Close" state per click
    	jQuery("h4.trigger").toggle(function(){
    		jQuery(this).addClass("active");
    		}, function () {
    		jQuery(this).removeClass("active");
    	});

    	//Hide and unhide on click.
    	jQuery("h4.trigger").click(function(){
    		jQuery(this).next(".article_container").toggle();
    	});
    });
  </script>
{% endblock %}

{% block body %}
  <div class="homepage_tips" >
    {% gblock "homepage_tips" for "gblocks.TitleAndText" %}
  </div>
  
  <div class="homepage_video" >
    {% gblock "homepage_video" for "gblocks.TitleAndText" %}
  </div>
  
  <div class="homepage_news" >
    {% if articles %}
      <h3>Featured News</h3>
      {% for article in articles %}
        {% include "news/article.html" %}
      {% endfor %}
    {% else %}
      {% gblock "homepage_news" for "gblocks.TitleAndText" %}
    {% endif %}
  </div>
  
  <div class="homepage_gauge" style="clear:left; width:400px">
    <h3>Energy gauge</h3>
    <div id="sourcediv" align="center"></div>
    <div id="chartdiv" align="center"></div>
    <div id="data_displayed_div" align="center"></div>
    <div id="lastcheckdiv" align="center"></div>
    
    <script type="text/javascript" src="{{ STATIC_URL }}js/gauge.js"></script>
  </div>
  
  <div class="homepage_heatmap" style="clear:left; width:400px">
    <h3>Heat Map</h3>
    <div id="datadiv" align="center" style="font-family: Arial;font-size: 12px;color: red"></div>
    <div id="lastchecked" align="center" style="font-family: Arial;font-size: 12px"> </div>
    <div id="onboardoptions" style="font-family: Arial;font-size: 12px"></div>
    <div id="onboarduidiv" style="font-family: Arial;font-size: 12px;display: none"></div>
    
    <script type="text/javascript">google.load("prototype", "1.6.1.0");</script>
    <script type="text/javascript" src="http://systemsbiology-visualizations.googlecode.com/svn/trunk/src/main/js/load.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/heatmap.js"></script>
  </div>
  
  <div class="homepage_about" >
    {% gblock "homepage_about" for "gblocks.TitleAndText" %}
  </div>
  
{% endblock %}
