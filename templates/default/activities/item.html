{% load activity_tags %}
{% load markup %}

<tr>
  <td class="item_info">
    <div class="item_title" style="{% if item.likes %}width: 65%;{% endif %}">
      <a href="#" style="text-decoration:none;">{{item.title}}</a>
    </div>
    {% if item.likes %}
    <div class="item_likes">
    {% with item.liked_users as like_users %}
      {% if like_users|length > 0 %}
        <span class="option-link ui-state-highlight ui-corner-all" style="margin-right: 10px">
          <span class="ui-icon ui-icon-person"></span>
          <span class="button-text">{{like_users|length}}</span>
        </span>
      {% endif %}
      {% if user in like_users %}
        <form action="/activities/unlike_{{item_type}}/{{item.pk}}/" method="post" style="display: inline">
        <a class="option-link ui-state-error ui-corner-all" href="#" onclick="parentNode.submit()">
          <span class="ui-icon ui-icon-circle-minus"></span>
          <span class="button-text">Unlike</span>
        </a></form>
      {% else %}
        <form action="/activities/like_{{item_type}}/{{item.pk}}/" method="post" style="display: inline">
        <a class="option-link ui-state-default ui-corner-all" href="#" onclick="parentNode.submit()">
          <span class="ui-icon ui-icon-star"></span>
          <span class="button-text">Like</span>
        </a></form>
      {% endif %}
    {% endwith %}
    </div>
    {% endif %}
  </td>
  <td class="item_points">
    {% if item.has_variable_points %}
      {{ item.point_range_start }}-{{ item.point_range_end }}
    {% else %}
      {{ item.point_value }}
    {% endif %}
  </td>
  <td class="item_options">
    {% render_user_tools user item %}
  </td>
</tr>


