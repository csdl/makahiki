{% extends "resources/resources_base.html" %}

{% load i18n %}
{% load generic_flatblocks %}

{% block head_title %}{% trans "Dorm Energy" %}{% endblock %}

{% block body %}
    <div id="content_header">
      
    </div>

    <div id="resources_topics_list" class="makahiki_content">
      <div class="makahiki_content_title ui-accordion-header ui-corner-top">
        Resource Topics
      </div>
      <div class="makahiki_content_body ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
        <form action="/resources/" method="POST">
          <ul id="topic_form">
            {{topic_form.as_ul}}
          </ul>
          <a href="#" onclick="parentNode.submit()" class="option-link ui-state-default ui-corner-all ui-state-hover">
            <span class="ui-icon ui-icon-arrowrefresh-1-e"></span>
            <span class="button-text">Refresh</span>
          </a>
        </form>
      </div>
    </div>

    <div id="resource_list" class="makahiki_content">
      <div class="makahiki_content_title ui-accordion-header ui-corner-top">
        {{list_title|truncatewords:20}}
      </div>
      <div class="makahiki_content_body ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active">
        <table>
          <tr>
            <th>Title</th>
            <th>Summary</th>
            <th>Topic Type(s)</th>
            <th>Media Type</th>
            <th>Length</th>
          </tr>
          {% for resource in resources %}
          <tr>
            <td>{{resource.title|truncatewords:5}}</td>
            <td>{{resource.abstract|truncatewords:10}}</td>
            <td>{{resource.topic_string|truncatewords:3}}</td>
            <td>{{resource.media_type}}</td>
            <td>{{resource.length}}</td>
          </tr>
          {% endfor %}
        </table>
        {% if more %}
          <a href="#">View all</a>
        {% endif %}
      </div>
    </div>

{% endblock %}
