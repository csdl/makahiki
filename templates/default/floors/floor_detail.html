{% extends "makahiki_profiles/base.html" %}

{% load generic_flatblocks %}
{% load avatar_tags %}

{% block active_subnav %}floor{%endblock%}

{% block extra_head %}
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/ajile/com.iskitz.ajile.js?mvcoff,mvcshareoff,refresh"></script>
  <script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.GDataLoader.js"></script>
  <script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.kukuicup.Configuration.js"></script>
  <script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.makahiki.EnergyLastSevenDays.js"></script>
  <script type="text/javascript" src="http://wattdepot-gdata.googlecode.com/svn/trunk/javascript/org.wattdepot.gdata.makahiki.EnergyLastTwentyFourHours.js"></script>
{% endblock %}
  

{% block body %}
  <div id="floor_left">
    <div id="member_list" class="floor_content ui-corner-all ui-accordion ui-widget ui-accordion-icons">
      <div class="ui-accordion-header ui-corner-top list_header">
        Members:
      </div>
      <div class="ui-accordion-content ui-widget-content ui-corner-bottom ui-accordion-content-active" style="padding: 5px; margin: 0 auto;">
        {% for profile in profiles %}
          <div class="member_block" style="display:inline; float:left; padding: 0; margin:0 0 5px 5px; width:70px; font-size: 0.8em">
            <a href="{% url profile_detail profile.user.id %}">
              <img src="{% avatar_url profile.user 40 %}" alt="Photo of {{ profile.user }}" title="{{ profile.user }}'s profile" 
                        class="photo" align="center"/><br/>
              {{profile.name}}
            </a>
          </div>
          {% if forloop.counter|divisibleby:3 %}
            <div style="clear:both"></div>
          {% endif %}
        {% endfor %}
        
        <a style="margin-left: 5px" href="{% url floor_members floor.dorm.slug floor.slug %}">View all</a>
      </div>
    </div>
  </div>
  
  <div id="floor_center">
    <div id="floor_energy" class="floor_content ui-corner-all ui-accordion ui-widget ui-accordion-icons">
      {% include "energy_data/daily.html" %}
    </div>
    
    <div id="wall_title" class="floor_content ui-corner-all ui-accordion ui-widget ui-accordion-icons">
      <div class="ui-state-default ui-accordion-header ui-corner-top list_header">
        Wall:
      </div>

      <div id="wall_content" class="ui-accordion-content ui-widget-content ui-corner-bottom ui-accordion-content-active">
        <div id="wall_form" style="padding: 0; padding-bottom: 5px; border-bottom: 1px solid #DFD9C3">
          <form action="{% url floor_post floor.dorm.slug floor.slug %}" method="post">
            <label for="wall_post">Post something on the wall:</label>
            <div id="wall_post" style="display:block; width: 100%">
              {{wall_form.post}}
            </div>
            <input type="submit" value="Submit" />
          </form>
        </div>
        
        {% if posts %}
          <ul id="wall_posts">
            {% include "floors/posts/list.html" %}
          </ul>
        {% else %}
          <p>There are no posts yet!</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div id="floor_right">
    {% include 'floors/monitor_panel.html' %}
  </div>
{% endblock %}

{% block extra_body %}

{% endblock %}