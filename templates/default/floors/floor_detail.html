{% extends "floors/base.html" %}

{% load generic_flatblocks %}
{% load avatar_tags %}

{% block tab_id %}"#profile_tab"{% endblock %}

{% block extra_head %}
{% endblock %}

{% block body %}
  <div id="floor_left">
    <div id="member_list" class="floor_content ui-corner-all ui-accordion ui-widget ui-accordion-icons">
      <div class="ui-accordion-header ui-corner-top activity_header">
        Members:
      </div>
      <div class="ui-accordion-content ui-widget-content ui-corner-bottom ui-accordion-content-active" style="padding: 5px 10px;">
        {% for profile in profiles %}
          <div class="member_block" style="display:inline; float:left; margin:0 0 10px 15px; width:45px; font-size: 0.8em">
            <a href="{% url profile_detail profile.user.username %}">
              <img src="{% avatar_url profile.user 40 %}" alt="Photo of {{ profile.user }}" title="{{ profile.user }}'s profile" class="photo" align="center"/>
              {{profile.user.username}}
            </a>
          </div>
        {% endfor %}
        
        <a style="margin-left: 15px" href="{% url floor_members floor.dorm.slug floor.slug %}">View all</a>
      </div>
    </div>
  </div>
  <div id="floor_center">
    <div id="wall_title" class="floor_content ui-corner-all ui-accordion ui-widget ui-accordion-icons">
      <div class="ui-state-default ui-accordion-header ui-corner-top activity_header">
        Wall:
      </div>

      <div id="wall_content" class="ui-accordion-content ui-widget-content ui-corner-bottom ui-accordion-content-active">
        <div id="wall_form" style="padding: 0; padding-bottom: 5px; border-bottom: 1px solid #DFD9C3">
          <form action="{% url floor_post floor.dorm.slug floor.slug %}" method="post">
            <label for="wall_post">Post something on the wall:</label>
            <div id="wall_post" style="display:block; width: 100%">
              {{wall_form.post}}
            </div>
            <input type="submit" value="Submit" />
          </form>
        </div>
        
        {% if posts %}
          <ul id="wall_posts">
          {% for post in posts %}
            <li>
              {% ifequal post.style_class "user_post" %}
                {% include "floors/posts/user_post.html" %}
              {% else %}
                {% include "floors/posts/system_post.html" %}
              {% endifequal %}
            </li>
          {% endfor %}
          </ul>
        {% else %}
          <p>There are no posts yet!</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div id="floor_right">
    {% include 'floors/monitor_panel.html' %}
  </div>
{% endblock %}

{% block extra_body %}

{% endblock %}