<script type="text/javascript">
	$(function() {
		$("#{{prefix}}_tabs").tabs({ selected: {{selected_tab}} });
	});
</script>

<div id="{{prefix}}_tabs" class="activity_item">
  <ul>
		{% for title in standings_titles %}
		  {% if forloop.last %}
		    <li><a href="#{{prefix}}_overall_standings" style="font-weight: normal">{{title}}</a></li>
		  {% else %}
		    <li><a href="#{{prefix}}_round_standings_{{forloop.counter}}" style="font-weight: normal">{{title}}</a></li>
		  {% endif %}
		{% endfor %}
	</ul>

  {% for standings in standings_array %}
    {% if forloop.last %}
      <div id="{{prefix}}_overall_standings"></div>
      <script type="text/javascript">
      // Wrap this code in an anonymous self-invoking function to avoid polluting global namespace.
      (function() {
        // This data structure must be generated by Makahiki.
        var floorStandings = {{standings|safe}};

        // Load the visualization API, then call displayDormData.
        var floorLoader = new org.wattdepot.gdata.GDataLoader(displayOverallStandings);  

        function displayOverallStandings() {
          var configuration = new org.wattdepot.gdata.kukuicup.Configuration();
          var standingsChart = new org.wattdepot.gdata.makahiki.Standings(configuration);
          standingsChart.draw('{{prefix}}_overall_standings', floorStandings);
        }
      })();
      </script>
    {% else %}
      <div id="{{prefix}}_round_standings_{{forloop.counter}}"></div>
      <script type="text/javascript">
      // Wrap this code in an anonymous self-invoking function to avoid polluting global namespace.
      (function() {
        // This data structure must be generated by Makahiki.
        var floorStandings = {{standings|safe}};

        // Load the visualization API, then call displayDormData.
        var floorLoader = new org.wattdepot.gdata.GDataLoader(displayFloor{{forloop.counter}}Standings);  

        function displayFloor{{forloop.counter}}Standings() {
          var configuration = new org.wattdepot.gdata.kukuicup.Configuration();
          var standingsChart = new org.wattdepot.gdata.makahiki.Standings(configuration);
          standingsChart.draw('{{prefix}}_round_standings_{{forloop.counter}}', floorStandings);
        }
      })();
      </script>
    {% endif %}
  {% endfor %}
</div>
