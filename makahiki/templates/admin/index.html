{% extends "base.html" %}
{% load admin_static %}

{% block page_title %}
    Status
{% endblock %}

{% block extra_head %}

    <link rel="icon" href="{{ STATIC_URL }}images/favicon.ico" />
    <link rel="stylesheet" type="text/css"
          href="{% block stylesheet %}{% static "admin/css/base.css" %}{% endblock %}" />
    {% block extrastyle %}{% endblock %}
    <script type="text/javascript">window.__admin_media_prefix__ = "{% filter escapejs %}{% static "admin/" %}{% endfilter %}";</script>

    <link rel="stylesheet" href="{{STATIC_URL}}jquery-ui/jquery-ui.css">

    {% if not MAKAHIKI_USE_LESS %}
        <link rel="stylesheet" href="{{STATIC_URL}}css/{{CSS_THEME}}.css">
    {% else %}
        <link rel="stylesheet/less" type="text/css" href="{{STATIC_URL}}less/{{CSS_THEME}}.less">
    {% endif %}

    <script src="{{STATIC_URL}}jquery-ui/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}jquery-ui/js/jquery-ui-1.8.18.custom.min.js"
            type="text/javascript"></script>
    <script src="{{STATIC_URL}}bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}bootstrap/js/bootstrap-tooltip.js" type="text/javascript"></script>

    {% if not MAKAHIKI_USE_LESS %}
        <link rel="stylesheet" href="{{STATIC_URL}}css/admin.css">
    {% else %}
        <link rel="stylesheet/less" type="text/css" href="{{STATIC_URL}}less/status.less">
        <script src="{{STATIC_URL}}js/less-1.3.0.min.js" type="text/javascript"></script>
    {% endif %}
{% endblock %}

{% block header %}
    {% include "components/navbar.html" %}
{% endblock %}

{% block body %}
<div class="row-fluid">
<div class="content-box span4">
    <div class="content-box-title">
        Challenge Admin
    </div>
    <div> Click on the links below to configure challenge settings or administrate players.</div>
    {% for app, models in MAKAHIKI_SITE_ADMIN_MODELS %}
        <div class="module">
            <table>
                <caption>{{ app }}</caption>
                <tbody>
                {% for model in models %}
                    <tr>
                        <th scope="row"><a href="/admin/{{ model.url }}">{{ model.name }}</a></th>
                        <td></td>
                        <td></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endfor %}
</div>

<div class="content-box span4">
    <div class="content-box-title">
        Game Admin
    </div>
    <div> Click on the links below to configure game related settings or administrate the games.
        Clicking on the title of a game will let you enable or disable the game and its widgets. </div>
    {% for app, enabled, pk, models in MAKAHIKI_GAME_ADMIN_MODELS %}
        <div class="module">
        <table>
        <caption><a title="Click to enable or disable the game"
                    href="/admin/challenge_mgr/gameinfo/{{ pk }}/">
            {{ app }}
            <span style="float: right;">
                {% if enabled %}
                    <img src="/site_media/static/admin/img/icon-yes.gif" alt="True">
                {% else %}
                    <img src="/site_media/static/admin/img/icon-no.gif" alt="False">
                {% endif %}
            </span>
            </a>
        </caption>
        <tbody>
        {% if enabled %}
        {% for model in models %}
            <tr>
                <th scope="row"><a href="/admin/{{ model.url }}">{{ model.name }}</a></th>
                <td></td>
                <td></td>
            </tr>
        {% endfor %}
        {% endif %}
        </tbody>
        </table>
        </div>
    {% endfor %}
</div>

{% if user.is_superuser %}

<div class="content-box span4">
    <div class="content-box-title">
        Internal Admin
    </div>
    <div>Click on the links below for other internal administrations</div>
    {% for app, models in MAKAHIKI_SYS_ADMIN_MODELS %}
        <div class="module">
            <table>
                <caption>{{ app }}</caption>
                <tbody>
                {% for model in models %}
                    <tr>
                        <th scope="row"><a href="/admin/{{ model.url }}">{{ model.name }}</a></th>
                        <td></td>
                        <td></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% endfor %}
</div>
{% endif %}

</div>

<script type="text/javascript">
    $('#admin-tab a:first').tab('show');
</script>
{% endblock %}