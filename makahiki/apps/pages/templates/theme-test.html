{% extends "base.html" %}
{% load markup %}
{% block extra_head_base %}
  <link rel="stylesheet" href="{{STATIC_URL}}jquery-ui/jquery-ui.css">
  {% if not MAKAHIKI_USE_LESS %}
    <link rel="stylesheet" href="{{STATIC_URL}}css/{{CSS_THEME}}.css">
  {% else %}
    <link rel="stylesheet/less" type="text/css" href="{{STATIC_URL}}less/{{CSS_THEME}}.less">
  {% endif %}
  <script src="{{STATIC_URL}}jquery-ui/js/jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}jquery-ui/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}bootstrap/js/bootstrap-tooltip.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}js/jquery.cycle.all.js" type="text/javascript" ></script>
  <script src="{{STATIC_URL}}js/jquery.purr.js" type="text/javascript" ></script>
  <script src="{{STATIC_URL}}js/makahiki.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}js/feedback.js" type="text/javascript"></script>
  {% if MAKAHIKI_USE_LESS %}
    <script src="{{STATIC_URL}}js/less-1.3.0.min.js" type="text/javascript"></script>
  {% endif %}
{% endblock %}
{% block header %}
  {% include "components/RIB.html" %}
  {% include "components/navbar.html" %}
  <div class="notifications makahiki-box">
    <div id="notification-unread">
        <span style="float: right;">
           <i class="notification-read icon-remove-sign"></i>
        </span>
        <ul class="notification-list">
            <li id="notification-item-1"
                class="{{notification.style_class}} notification-item">
                <div class="notification-contents">
                    <div class='notice-icon'>
                        <i class="{{notification.icon_class}}"></i>
                    </div>
                    <div class='notice-list-content'>
                        notification contents
                    </div>
                </div>

                <div class="notification-options">
                    <a class="notification-share" href="javascript:void(0);">Share on Facebook</a>
                </div>
                <div style="clear:both"></div>
                <script type="text/javascript">
        			jQuery(document).ready(function ($) {
            			$("#notification-item-1 .notification-share").click(function () {
                			log_js_action("notification", "1", "share");
                			FB.ui(
                        			{
                            			method:'feed',
                            			name:'Kukui Cup',
                            			link:'http://{{request.META.HTTP_HOST}}',
                            			picture:'http://{{request.META.HTTP_HOST}}{{STATIC_URL}}images/old-logo.png',
                            			description:'{{notification.contents}}',
                            			display:'popup'
                        			},

			                        function (response) {
            			                if (response && response.post_id) {
                        			        log_js_action("notification", "1", "shared");
			                                $.post("{% url notifications_read notification.id %}", function (data) {
            			                        $("#notification-item-1").fadeOut();
                        			        });
                            			}
                            			else {
			                                log_js_action("notification", "1", "share-canceled");
            			                }
			                        }
            			    );
			            });
        			});
			    </script>
            </li>
            <li id="notification-item-2"
                class="{{notification.style_class}} notification-item">
                <div class="notification-contents">
                    <div class='notice-icon'>
                        <i class="{{notification.icon_class}}"></i>
                    </div>
                    <div class='notice-list-content'>
                        notification contents safe
                    </div>
                </div>

                <div class="notification-options">
                </div>
                <div style="clear:both"></div>
                <script type="text/javascript">
			        jQuery(document).ready(function ($) {
			            $("#notification-item-2 .notification-share").click(function () {
            			    log_js_action("notification", "2", "share");
			                FB.ui(
            			            {
                        			    method:'feed',
			                            name:'Kukui Cup',
            			                link:'http://{{request.META.HTTP_HOST}}',
                        			    picture:'http://{{request.META.HTTP_HOST}}{{STATIC_URL}}images/old-logo.png',
			                            description:'{{notification.contents}}',
            			                display:'popup'
                        			},

			                        function (response) {
            			                if (response && response.post_id) {
                        			        log_js_action("notification", "2", "shared");
			                                $.post("{% url notifications_read notification.id %}", function (data) {
            			                        $("#notification-item-2").fadeOut();
			                                });
            			                }
                            			else {
			                                log_js_action("notification", "2", "share-canceled");
            			                }
                        			}
			                );
            			});
			        });
			    </script>
            </li>
            {% for notification in notifications.unread %}
                {% include "widgets/notifications/templates/notifications/list-item.html" %}
            {% endfor %}
        </ul>
    </div>
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $("#notification-unread .notification-read").click(function () {
                $.post("{% url notifications_read 0 %}", function (data) {
                    $("#notification-unread").hide();
                });
            });
        });
    </script>
  </div>
  <div id="quests" class="makahiki-box">
    <script src="{{STATIC_URL}}js/quest.js" type="text/javascript"></script>
    <div class="quest-box">
        <div class="makahiki-box-title">
            <h3 class="makahiki-box-title">Your Quests</h3>
            <a href="#">
                <img src="{{ STATIC_URL}}images/icons/icon-help-sm.png"
                     title="Click to get help about this window"
                     onclick="toggleHelp(event, 'widget', 'quests'); return false;"/>
            </a>
        </div>
        <div>
            <img class="quest-pad" src="{{ STATIC_URL}}images/spacer.png" width="20">
            <ul class="quest-list">
                <li>
                    <i class="icon-cog"></i>
                    <a href="javascript:void(0)" id="{{quest.quest_slug}}"
                       class="quest-title {% if user_quest %}quest-user-quest{%endif%}">
                        quest name
                    </a>
                    <div class="quest-description" style="display:none">
                        quest description markdown 
                        <div class="quest-options">
                                <form action="{% url quests_cancel quest.quest_slug %}" method="POST"
                                      style="display: inline">
                                    {% csrf_token %}
                                    <button class="btn btn-widget" type="submit" style="margin-right: 20px">Cancel this quest</button>
                                </form>
                                <form action="{% url quests_accept quest.quest_slug %}" method="POST"
                                    style="display: inline">
                                    {% csrf_token %}
                                    <button class="btn btn-widget" type="submit" style="margin-right: 20px">I accept this quest</button>
                                </form>
                                <form action="{% url quests_opt_out quest.quest_slug %}" method="POST"
                                      style="display: inline">
                                    {% csrf_token %}
                                    <button class="btn btn-widget" type="submit">I am not interested in this quest</button>
                                </form>
                        </div>
                    </div>
                </li>
            </ul>
            <p style="text-align: center; width: 100%">There are no quests available at this time.  Please check back later!</p>
        </div>
        <div id="quest-details" style="margin: 0px 10px; display: none">
            <div id="quest-contents" class="quest-description" style="clear:both"></div>
            <a href="javascript:void(0)" id="quest-hide">Close</a>
            <div style="clear:both"></div>
        </div>
    </div>
  </div>
  <div id="messages">
    <ul class="messages">
        <li class="{{ message.tags }}">Message 1</li>
        <li class="{{ message.tags }}">Message 2</li>
    </ul>
  </div>
{% endblock %}
{% block body %}
    <div class="container-fluid">
        <div class="row-fluid">
            <!-- left column -->
            <div class="span6">
                <div class="content-box">
                    <div class="content-box-title">
                        Widget Title
                        <a href="#" style="float: right">
                            <img src="{{ STATIC_URL}}images/icons/icon-help-sm.png" width="20"
                                 align="center"
                                 title="Click to get help about this window"
                                 onclick="toggleHelp(event, 'widget', 'news-feed'); return false;"/>
                        </a>
                    </div>
                    <div class="content-box-content wallpost-content">
                    Wallpost widget
                        <div>
                            <form id="news-post-form" action="{% url news_post %}" method="POST">
                                {% csrf_token %}
                                <div id="wall-post-errors"></div>
                                <div id="wall-post" class="control-group">
                                    <div class="controls">
                                        <textarea rows="2" id="id_post" name="post" placeholder="What's on your mind?"/></textarea>
                                    </div>
                                </div>
                                <div>
                                    <button id="wall-post-submit" class="btn btn-widget padded">
                                        Post
                                    </button>
                                </div>
                            </form>
                        </div>
                        </br>
                        <div class="btn-group">
                            <button id="user-post" class="btn btn-primary" style="">User Posts</button>
                            <button id="system-post" class="btn btn-primary" style="">System Posts</button>  
                        </div>
                    </div>        
                </div>
                <div class="content-box">
                    <div class="content-box-title">
                        Plain Widget Title
                    </div>
                    <div class="content-box-contents">
                        Plain Widget body
                    </div>
                </div>
            </div>
            <!-- right column -->
            <div class="span6">
                {% include "admin/badge-display.html" %}
                <div class="modal" id="helpModal">
                    <div class="modal-header">
                        <a class="close" data-dismiss="modal">x</a>
                        <h3>Modal header</h3>
                    </div>
                    <div class="modal-body" id="modal-body">
                        <p>One fine body&hellip;</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn btn-widget" data-dismiss="modal">Close</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}