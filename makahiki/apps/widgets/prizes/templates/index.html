<div id="prizes-list" class="content-box">
    <div class="content-box-title">
        <h3>Top Scorer Game</h3>
        <a href="#" style="float: right">
            <img src="{{ STATIC_URL}}images/icons/icon-help-sm.png" width="20"
                 title="Click to get help about this window"
                 onclick="toggleHelp(event, 'widget', 'prizes'); return false;"/></a>
    </div>
    <div class="row-fluid">
        <div id="prizes-carousel" class="span12">
            {% include "view_prizes/prize_list.html" %}
        </div>
    </div>
</div>
<div id="prizeModal" class="modal hide fade">
    <div class="modal-header">
        <h3></h3>
    </div>
    <div class="modal-body"></div>
    <div class="modal-footer">
        <a href="#" class="btn btn-widget" data-dismiss="modal">Close</a>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        // Calculate the height of the items in the scoreboard.
        // Fix the height of all items to that height.
        var maxHeight = 45;
        var height = 0;
        $("#prizes-carousel .item").each(function(index, item) {
          height = $(item).height();
          // console.log("height of item is " + height);
          if (height > maxHeight){
            maxHeight = height;
          }
        });
        
//         $("#prizes-carousel").height(maxHeight);

        var outerWidth = $("#prizes-list").width();
        $(".set-width-outer-width").each (function(index, item) {
            item.style.width = outerWidth + "px";
        });
        
//       $("#prizes-carousel").carousel();
        $("#prizes-carousel").cycle({
          fx: "fade",
          timeout: 3500,
          delay:  -1000,
          sync: true        	
        });
    });
    $(window).resize(function() {
        var outerWidth = $("#prizes-list").width();
//         console.log("Outer width is " + outerWidth);
        $(".set-width-outer-width").each (function(index, item) {
//          console.log("Setting " + item + "'s width to " + outerWidth);
            item.style.width = outerWidth + "px";
        });     
    });    
    
    var togglePrize = function(event, name, title, description) {
        var modalElement = $('#prizeModal');
        // set up event logging
        modalElement.on('shown', function() {
            log_js_action(name, title, 'prize-open');
        });
        modalElement.on('hidden', function() {
            log_js_action(name, title, 'prize-close');
        });
        modalElement.find('.modal-header h3').html(name + ": " + title);
        modalElement.find('.modal-body').html(description);
        document.getElementById('prizeModal').style.top = event.pageY + "px";        
        modalElement.modal('show');
    }   
</script>
